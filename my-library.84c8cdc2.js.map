{"mappings":"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","sources":["src/my-library.js","src/scripts/hero-library.js","src/scripts/library.js"],"sourcesContent":["import './scripts/theme-switch';\nimport './scripts/hero-library';\n// import './scripts/modal-window';\nimport './scripts/library';\nimport './scripts/current';\n","import { getDayTrendingMovies, getMovieVideos } from './movies-api';\nimport { starRating } from './star-rating';\n\nconst heroLibraryBg = document.getElementById('heroLibrary-bg');\nconst heroLibraryContent = document.getElementById('heroLibrary-content');\nconst heroLibraryWrapper = document.getElementById('heroLibrary__wrapper');\nconst heroLibraryMovie = document.getElementById('heroLibrary-movie');\nconst heroLibraryImage = document.getElementById('heroLibrary-image');\nconst heroLibraryMovieMob = document.getElementById('heroLibrary-movie-mob');\nconst modalHero = document.getElementById('modal-hero');\nconst closeModalHeroBtn = document.getElementById('modal-hero-close');\nconst modalError = document.querySelector('.modal-error');\n\ncloseModalHeroBtn.addEventListener('click', onCloseModal);\nmodalHero.addEventListener('click', onBackdropClick);\n\nexport function renderHero() {\n  getDayTrendingMovies().then(data => {\n    try {\n      const movies = data.results;\n      if (movies.length === 0) {\n        heroLibraryMovie.classList.add('visually-hidden');\n        return;\n      } else {\n        const randomIndex = Math.floor(Math.random() * movies.length);\n        const movie = movies[randomIndex];\n        const { backdrop_path, title, overview, vote_average, id } = movie;\n\n        heroLibraryBg.style.backgroundImage = `linear-gradient(87.8deg, #0e0e0e 15.61%, rgba(14, 14, 14, 0) 60.39%),url('https://image.tmdb.org/t/p/original/${backdrop_path}')`;\n        heroLibraryImage.style.backgroundImage = `url('https://image.tmdb.org/t/p/original/${backdrop_path}')`;\n        heroLibraryMovieMob.innerHTML = `\n        <h1 class=\"hero__title-movie\">${title}</h1>\n        <div class=\"hero__wrapper-rating\">\n        <span class=\"hero-card__rating\">\n      <div class=\"rating hero-rating\">\n        <div class=\"hero-rating__body\">\n          <div class=\"rating__active\"></div>\n          <div class=\"hero-rating__items\">\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"10\"\n              class=\"rating__item\"\n              value=\"${vote_average}\"\n              name=\"hero-rating\"\n            />\n          </div>\n        </div>\n      </div>\n    </span>\n    </div>\n        <p class=\"hero__text-movie\">${overview}</p>\n        <button class=\"btn hero__btn-movie\" id=\"modal-hero-open-mob\">Watch trailer</button>\n      `;\n        starRating();\n        heroLibraryMovie.innerHTML = `\n        <h1 class=\"hero__title-movie\">${title}</h1>\n        <div class=\"hero__wrapper-rating\">\n        <span class=\"hero-card__rating\">\n      <div class=\"rating hero-rating\">\n        <div class=\"hero-rating__body\">\n          <div class=\"rating__active\"></div>\n          <div class=\"hero-rating__items\">\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"10\"\n              class=\"rating__item\"\n              value=\"${vote_average}\"\n              name=\"hero-rating\"\n            />\n          </div>\n        </div>\n      </div>\n    </span>\n    </div>\n        <p class=\"hero__text-movie\">${overview}</p>\n        <button class=\"btn hero__btn-movie\" id=\"modal-hero-open\">Watch trailer</button>\n      `;\n        starRating();\n        const openModalHeroBtn = document.getElementById('modal-hero-open');\n        const openModalHeroBtnMob = document.getElementById('modal-hero-open-mob');\n        openModalHeroBtn.addEventListener('click', () => {\n          showMovieTrailer(id);\n          onOpenModal();\n        });\n        openModalHeroBtnMob.addEventListener('click', () => {\n          showMovieTrailer(id);\n          onOpenModal();\n        });\n\n        function onOpenModal() {\n          window.addEventListener('keydown', onEscKeyPress);\n          modalHero.classList.remove('hero-is-hidden');\n        }\n          heroLibraryContent.classList.add('visually-hidden');\n          heroLibraryWrapper.classList.add('visually-hidden');\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  });\n}\nexport function onEscKeyPress(e) {\n  if (e.code === 'Escape') {\n    onCloseModal();\n  }\n}\nexport function onBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    onCloseModal();\n  }\n}\nexport function onCloseModal() {\n  window.removeEventListener('keydown', onEscKeyPress);\n  modalHero.classList.add('hero-is-hidden');\n}\n\nexport function showMovieTrailer(movieId) {\n  try {\n    getMovieVideos(movieId).then(data => {\n      const videos = data.results.filter(video => video.type === 'Trailer');\n      if (videos.length === 0) {\n        return;\n      }\n      const videoKey = videos[0].key;\n      const trailerUrl = `https://www.youtube.com/embed/${videoKey}`;\n      const modalVideo = document.querySelector('.modal-video');\n      modalVideo.innerHTML = `<iframe src=\"${trailerUrl}\" title=\"YouTube video player\"\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share;\"\n          allowfullscreen></iframe>`;\n      modalError.classList.add('hero-is-hidden');\n    });\n  } catch (error) {\n    console.error(error);\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  renderHero();\n});\n","// import { onOpenModal } from './modal-window';\n// import { filmCards } from './modal-window';\n\nimport { starRating } from './star-rating';\n// import { getMovieDetails } from './modal-window';\n\nconst LibKey = 'myLibrary';\n\nconst libraryGallery = document.querySelector('.library-cards__list');\n// const filmCards = document.querySelector('.js-film');\nconst alertMessage = document.querySelector('.alert__message');\n// console.log(libraryGallery);\n\n// filmCards.addEventListener('click', onOpenModal);\n\nfunction getMovieFromLib(movie) {\n  const { title, poster_path, vote_average, genres, release_date, id } = movie;\n\n  const genresName = genres\n    .map(genre => genre.name)\n    .slice(0, 2)\n    .join(', ');\n\n  const libraryMarkup = `<li class=\"film-card js-card\" data-id=\"${id}\">\n\n<img\n    class=\"film-card__img\"\n    src=\"${`https://image.tmdb.org/t/p/w500${poster_path}`}\"  \n    alt=\"${title}\" loading='lazy'\n  />\n\n  <div class=\"film-card__wrapper\">\n    <h2 class=\"film-card__title\">${title}</h2>\n    <ul class=\"film-card__description list\">\n      <li class=\"film-card__genres\">${genresName} |</li>\n\n      <li class=\"film-card__release-date\">${release_date.split('-')[0]}</li>\n    </ul>\n    <span class=\"film-card__rating\">\n      <div class=\"rating\">\n        <div class=\"rating__body\">\n          <div class=\"rating__active\"></div>\n          <div class=\"rating__items\">\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"10\"\n              class=\"rating__item\"\n              value=\"${vote_average}\"\n              name=\"rating\"\n            />\n          </div>\n        </div>\n      </div>\n    </span>\n  </div>\n</li>`;\n\n  libraryGallery.insertAdjacentHTML('beforeend', libraryMarkup);\n  starRating();\n}\n\n// //TODO: Получить массив фильмов из локального хранилища\nconst library = JSON.parse(localStorage.getItem(LibKey)) || [];\n// console.log(library);\n\nif (library.length < 1) {\n  alertMessage.classList.remove('visually-hidden');\n} else {\n  alertMessage.classList.add('visually-hidden');\n}\n\nlibrary.forEach(movie => {\n  getMovieFromLib(movie);\n});\n\n// function getMovie(library) {\n//   if (library.length < 1) {\n//     alertMessage.classList.remove('visually-hidden');\n\n//   } else {\n//     alertMessage.classList.add('visually-hidden');\n\n//   }\n//      library.forEach(movie => {\n//         getMovieFromLib(movie);\n//       });\n// }\n// getMovie(library);\n"],"names":["parcelRequire","$algKM","$4799cf69530209f0$var$heroLibraryBg","document","getElementById","$4799cf69530209f0$var$heroLibraryContent","$4799cf69530209f0$var$heroLibraryWrapper","$4799cf69530209f0$var$heroLibraryMovie","$4799cf69530209f0$var$heroLibraryImage","$4799cf69530209f0$var$heroLibraryMovieMob","$4799cf69530209f0$var$modalHero","$4799cf69530209f0$var$closeModalHeroBtn","$4799cf69530209f0$var$modalError","querySelector","$4799cf69530209f0$export$fb6b6f6d7754d13b","e","code","$4799cf69530209f0$export$9dc820945641dd09","window","removeEventListener","classList","add","$4799cf69530209f0$export$8640f99dfcd1c228","movieId","getMovieVideos","then","data","videos","results","filter","video","type","length","videoKey","key","trailerUrl","concat","innerHTML","error","console","addEventListener","currentTarget","target","getDayTrendingMovies","movies","movie","Math","floor","random","backdrop_path","title","overview","vote_average","id","style","backgroundImage","$3hLJb","starRating","openModalHeroBtn","openModalHeroBtnMob","onOpenModal","remove","$28ec54247cb7aef6$var$libraryGallery","$28ec54247cb7aef6$var$alertMessage","$28ec54247cb7aef6$var$library","JSON","parse","localStorage","getItem","forEach","poster_path","genres","release_date","genresName","map","genre","name","slice","join","libraryMarkup","split","insertAdjacentHTML","$28ec54247cb7aef6$var$getMovieFromLib"],"version":3,"file":"my-library.84c8cdc2.js.map"}