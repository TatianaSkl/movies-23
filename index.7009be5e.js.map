{"mappings":"khBAAA,IAAAA,EAAAC,EAAA,S,aAGMC,EAASC,SAASC,eAAe,WACjCC,EAAcF,SAASC,eAAe,gBACtCE,EAAcH,SAASC,eAAe,iBACtCG,EAAYJ,SAASC,eAAe,cACpCI,EAAYL,SAASC,eAAe,cACpCK,EAAeN,SAASC,eAAe,kBACvCM,EAAYP,SAASC,eAAe,cACpCO,EAAoBR,SAASC,eAAe,oBAC5CQ,EAAaT,SAASU,cAAc,gBAgGnC,SAASC,EAAcC,GACb,WAAXA,EAAEC,MACJC,G,CAQG,SAASA,IACdC,OAAOC,oBAAoB,UAAWL,GACtCJ,EAAUU,UAAUC,IAAI,iB,CAGnB,SAASC,EAAiBC,GAC/B,KACE,EAAAvB,EAAAwB,gBAAeD,GAASE,MAAK,SAAAC,GAC3B,IAAMC,EAASD,EAAKE,QAAQC,QAAO,SAAAC,G,MAAwB,YAAfA,EAAMC,I,IAClD,GAAsB,IAAlBJ,EAAOK,OAAX,CAGA,IAAMC,EAAWN,EAAO,GAAGO,IACrBC,EAAa,iCAA0CC,OAATH,GACjC9B,SAASU,cAAc,gBAC/BwB,UAAY,gBAA2BD,OAAXD,EAAW,+LAGlDvB,EAAWQ,UAAUC,IAAI,iBARvB,C,IAUJ,MAAOiB,GACPC,QAAQD,MAAMA,E,EA7HlB3B,EAAkB6B,iBAAiB,QAASvB,GAC5CP,EAAU8B,iBAAiB,SAkGpB,SAAyBzB,GAC1BA,EAAE0B,gBAAkB1B,EAAE2B,QACxBzB,G,IA4BJd,SAASqC,iBAAiB,oBAAoB,YA7H5C,EAAAxC,EAAA2C,wBAAuBlB,MAAK,SAAAC,GAC1B,IACE,IAAMkB,EAASlB,EAAKE,QACpB,GAAsB,IAAlBgB,EAAOZ,OAET,YADAzB,EAAUa,UAAUC,IAAI,mBAEnB,CACL,IACMwB,EAAQD,EADME,KAAKC,MAAMD,KAAKE,SAAWJ,EAAOZ,SAE9CiB,EAAqDJ,EAArDI,cAAeC,EAAsCL,EAAtCK,MAAOC,EAA+BN,EAA/BM,SAAUC,EAAqBP,EAArBO,aAAcC,EAAOR,EAAPQ,GAEtDnD,EAAOoD,MAAMC,gBAAkB,iHAA+HnB,OAAda,EAAc,MAC9JzC,EAAU8C,MAAMC,gBAAkB,4CAA0DnB,OAAda,EAAc,MAC5FxC,EAAa4B,UAAY,2CAcVD,OAbiBc,EAAM,+bAqBRd,OARfgB,EAAa,sKAQWhB,OAATe,EAAS,8GAGvC,EAAAK,EAAAC,cACAlD,EAAU8B,UAAY,2CAcPD,OAbiBc,EAAM,+bAqBRd,OARfgB,EAAa,sKAQWhB,OAATe,EAAS,0GAGvC,EAAAK,EAAAC,cACA,IAAMC,EAAmBvD,SAASC,eAAe,mBAC3CuD,EAAsBxD,SAASC,eACnC,uBAWF,SAASwD,IACP1C,OAAOsB,iBAAiB,UAAW1B,GACnCJ,EAAUU,UAAUyC,OAAO,iB,CAX7BH,EAAiBlB,iBAAiB,SAAS,WACzClB,EAAiB+B,GACjBO,G,IAEFD,EAAoBnB,iBAAiB,SAAS,WAC5ClB,EAAiB+B,GACjBO,G,IAOFvD,EAAYe,UAAUC,IAAI,mBAC1Bf,EAAYc,UAAUC,IAAI,kB,EAE5B,MAAOiB,GACPC,QAAQD,MAAMA,E","sources":["src/scripts/hero.js"],"sourcesContent":["import { getDayTrendingMovies, getMovieVideos } from './movies-api';\nimport { starRating } from './star-rating';\n\nconst heroBg = document.getElementById('hero-bg');\nconst heroContent = document.getElementById('hero-content');\nconst heroWrapper = document.getElementById('hero__wrapper');\nconst heroMovie = document.getElementById('hero-movie');\nconst heroImage = document.getElementById('hero-image');\nconst heroMovieMob = document.getElementById('hero-movie-mob');\nconst modalHero = document.getElementById('modal-hero');\nconst closeModalHeroBtn = document.getElementById('modal-hero-close');\nconst modalError = document.querySelector('.modal-error');\n\ncloseModalHeroBtn.addEventListener('click', onCloseModal);\nmodalHero.addEventListener('click', onBackdropClick);\n\nexport function renderHero() {\n  getDayTrendingMovies().then(data => {\n    try {\n      const movies = data.results;\n      if (movies.length === 0) {\n        heroMovie.classList.add('visually-hidden');\n        return;\n      } else {\n        const randomIndex = Math.floor(Math.random() * movies.length);\n        const movie = movies[randomIndex];\n        const { backdrop_path, title, overview, vote_average, id } = movie;\n\n        heroBg.style.backgroundImage = `linear-gradient(87.8deg, #0e0e0e 15.61%, rgba(14, 14, 14, 0) 60.39%),url('https://image.tmdb.org/t/p/original/${backdrop_path}')`;\n        heroImage.style.backgroundImage = `url('https://image.tmdb.org/t/p/original/${backdrop_path}')`;\n        heroMovieMob.innerHTML = `\n        <h1 class=\"hero__title-movie\">${title}</h1>\n        <div class=\"hero__wrapper-rating\">\n        <span class=\"hero-card__rating\">\n      <div class=\"rating hero-rating\">\n        <div class=\"hero-rating__body\">\n          <div class=\"rating__active\"></div>\n          <div class=\"hero-rating__items\">\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"100\"\n              step=\"0.1\"\n              class=\"rating__item\"\n              value=\"${vote_average}\"\n              name=\"hero-rating\"\n            />\n          </div>\n        </div>\n      </div>\n    </span>\n    </div>\n        <p class=\"hero__text-movie\">${overview}</p>\n        <button class=\"btn hero__btn-movie\" id=\"modal-hero-open-mob\">Watch trailer</button>\n      `;\n        starRating();\n        heroMovie.innerHTML = `\n        <h1 class=\"hero__title-movie\">${title}</h1>\n        <div class=\"hero__wrapper-rating\">\n        <span class=\"hero-card__rating\">\n      <div class=\"rating hero-rating\">\n        <div class=\"hero-rating__body\">\n          <div class=\"rating__active\"></div>\n          <div class=\"hero-rating__items\">\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"100\"\n              step=\"0.1\"\n              class=\"rating__item\"\n              value=\"${vote_average}\"\n              name=\"hero-rating\"\n            />\n          </div>\n        </div>\n      </div>\n    </span>\n    </div>\n        <p class=\"hero__text-movie\">${overview}</p>\n        <button class=\"btn hero__btn-movie\" id=\"modal-hero-open\">Watch trailer</button>\n      `;\n        starRating();\n        const openModalHeroBtn = document.getElementById('modal-hero-open');\n        const openModalHeroBtnMob = document.getElementById(\n          'modal-hero-open-mob'\n        );\n        openModalHeroBtn.addEventListener('click', () => {\n          showMovieTrailer(id);\n          onOpenModal();\n        });\n        openModalHeroBtnMob.addEventListener('click', () => {\n          showMovieTrailer(id);\n          onOpenModal();\n        });\n\n        function onOpenModal() {\n          window.addEventListener('keydown', onEscKeyPress);\n          modalHero.classList.remove('hero-is-hidden');\n        }\n        heroContent.classList.add('visually-hidden');\n        heroWrapper.classList.add('visually-hidden');\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  });\n}\nexport function onEscKeyPress(e) {\n  if (e.code === 'Escape') {\n    onCloseModal();\n  }\n}\nexport function onBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    onCloseModal();\n  }\n}\nexport function onCloseModal() {\n  window.removeEventListener('keydown', onEscKeyPress);\n  modalHero.classList.add('hero-is-hidden');\n}\n\nexport function showMovieTrailer(movieId) {\n  try {\n    getMovieVideos(movieId).then(data => {\n      const videos = data.results.filter(video => video.type === 'Trailer');\n      if (videos.length === 0) {\n        return;\n      }\n      const videoKey = videos[0].key;\n      const trailerUrl = `https://www.youtube.com/embed/${videoKey}`;\n      const modalVideo = document.querySelector('.modal-video');\n      modalVideo.innerHTML = `<iframe src=\"${trailerUrl}\" title=\"YouTube video player\"\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share;\"\n          allowfullscreen></iframe>`;\n      modalError.classList.add('hero-is-hidden');\n    });\n  } catch (error) {\n    console.error(error);\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  renderHero();\n});\n"],"names":["$algKM","parcelRequire","$3b2fa88030976769$var$heroBg","document","getElementById","$3b2fa88030976769$var$heroContent","$3b2fa88030976769$var$heroWrapper","$3b2fa88030976769$var$heroMovie","$3b2fa88030976769$var$heroImage","$3b2fa88030976769$var$heroMovieMob","$3b2fa88030976769$var$modalHero","$3b2fa88030976769$var$closeModalHeroBtn","$3b2fa88030976769$var$modalError","querySelector","$3b2fa88030976769$export$fb6b6f6d7754d13b","e","code","$3b2fa88030976769$export$9dc820945641dd09","window","removeEventListener","classList","add","$3b2fa88030976769$export$8640f99dfcd1c228","movieId","getMovieVideos","then","data","videos","results","filter","video","type","length","videoKey","key","trailerUrl","concat","innerHTML","error","console","addEventListener","currentTarget","target","getDayTrendingMovies","movies","movie","Math","floor","random","backdrop_path","title","overview","vote_average","id","style","backgroundImage","$3hLJb","starRating","openModalHeroBtn","openModalHeroBtnMob","onOpenModal","remove"],"version":3,"file":"index.7009be5e.js.map"}