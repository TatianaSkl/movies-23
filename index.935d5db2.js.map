{"mappings":"sgBAAA,IAAAA,EAAAC,EAAA,S,aAGA,MAAMC,EAASC,SAASC,eAAe,WACjCC,EAAcF,SAASC,eAAe,gBACtCE,EAAcH,SAASC,eAAe,iBACtCG,EAAYJ,SAASC,eAAe,cACpCI,EAAYL,SAASC,eAAe,cACpCK,EAAeN,SAASC,eAAe,kBACvCM,EAAYP,SAASC,eAAe,cACpCO,EAAoBR,SAASC,eAAe,oBAC5CQ,EAAaT,SAASU,cAAc,gBA4FnC,SAASC,EAAcC,GACb,WAAXA,EAAEC,MACJC,G,CAQG,SAASA,IACdC,OAAOC,oBAAoB,UAAWL,GACtCJ,EAAUU,UAAUC,IAAI,iB,CAGnB,SAASC,EAAiBC,GAC/B,KACE,EAAAvB,EAAAwB,gBAAeD,GAASE,MAAKC,IAC3B,MAAMC,EAASD,EAAKE,QAAQC,QAAOC,GAAwB,YAAfA,EAAMC,OAClD,GAAsB,IAAlBJ,EAAOK,OACT,OAEF,MACMC,EAAa,iCADFN,EAAO,GAAGO,MAER/B,SAASU,cAAc,gBAC/BsB,UAAY,gBAAgBF,+LAGvCrB,EAAWQ,UAAUC,IAAI,iBAAiB,G,CAE5C,MAAOe,GACPC,QAAQD,MAAMA,E,EAzHlBzB,EAAkB2B,iBAAiB,QAASrB,GAC5CP,EAAU4B,iBAAiB,SA8FpB,SAAyBvB,GAC1BA,EAAEwB,gBAAkBxB,EAAEyB,QACxBvB,G,IA4BJd,SAASmC,iBAAiB,oBAAoB,MAzH5C,EAAAtC,EAAAyC,wBAAuBhB,MAAKC,IAC1B,IACE,MAAMgB,EAAShB,EAAKE,QACpB,GAAsB,IAAlBc,EAAOV,OAET,YADAzB,EAAUa,UAAUC,IAAI,mBAEnB,CACL,MACMsB,EAAQD,EADME,KAAKC,MAAMD,KAAKE,SAAWJ,EAAOV,UAEhDe,cAAEA,EAAaC,MAAEA,EAAKC,SAAEA,EAAQC,aAAEA,EAAYC,GAAEA,GAAOR,EAE7DzC,EAAOkD,MAAMC,gBAAkB,iHAAiHN,MAChJvC,EAAU4C,MAAMC,gBAAkB,4CAA4CN,MAC9EtC,EAAa0B,UAAY,2CACOa,oaAYjBE,sKAQeD,8GAG9B,EAAAK,EAAAC,cACAhD,EAAU4B,UAAY,2CACUa,oaAYjBE,sKAQeD,0GAG9B,EAAAK,EAAAC,cACA,MAAMC,EAAmBrD,SAASC,eAAe,mBAC3CqD,EAAsBtD,SAASC,eAAe,uBAUpD,SAASsD,IACPxC,OAAOoB,iBAAiB,UAAWxB,GACnCJ,EAAUU,UAAUuC,OAAO,iB,CAX7BH,EAAiBlB,iBAAiB,SAAS,KACzChB,EAAiB6B,GACjBO,GAAa,IAEfD,EAAoBnB,iBAAiB,SAAS,KAC5ChB,EAAiB6B,GACjBO,GAAa,IAOfrD,EAAYe,UAAUC,IAAI,mBAC1Bf,EAAYc,UAAUC,IAAI,kB,EAE5B,MAAOe,GACPC,QAAQD,MAAMA,E,IAwCN,G","sources":["src/scripts/hero.js"],"sourcesContent":["import { getDayTrendingMovies, getMovieVideos } from './movies-api';\nimport { starRating } from './star-rating';\n\nconst heroBg = document.getElementById('hero-bg');\nconst heroContent = document.getElementById('hero-content');\nconst heroWrapper = document.getElementById('hero__wrapper');\nconst heroMovie = document.getElementById('hero-movie');\nconst heroImage = document.getElementById('hero-image');\nconst heroMovieMob = document.getElementById('hero-movie-mob');\nconst modalHero = document.getElementById('modal-hero');\nconst closeModalHeroBtn = document.getElementById('modal-hero-close');\nconst modalError = document.querySelector('.modal-error');\n\ncloseModalHeroBtn.addEventListener('click', onCloseModal);\nmodalHero.addEventListener('click', onBackdropClick);\n\nexport function renderHero() {\n  getDayTrendingMovies().then(data => {\n    try {\n      const movies = data.results;\n      if (movies.length === 0) {\n        heroMovie.classList.add('visually-hidden');\n        return;\n      } else {\n        const randomIndex = Math.floor(Math.random() * movies.length);\n        const movie = movies[randomIndex];\n        const { backdrop_path, title, overview, vote_average, id } = movie;\n\n        heroBg.style.backgroundImage = `linear-gradient(87.8deg, #0e0e0e 15.61%, rgba(14, 14, 14, 0) 60.39%),url('https://image.tmdb.org/t/p/original/${backdrop_path}')`;\n        heroImage.style.backgroundImage = `url('https://image.tmdb.org/t/p/original/${backdrop_path}')`;\n        heroMovieMob.innerHTML = `\n        <h1 class=\"hero__title-movie\">${title}</h1>\n        <div class=\"hero__wrapper-rating\">\n        <span class=\"hero-card__rating\">\n      <div class=\"rating hero-rating\">\n        <div class=\"hero-rating__body\">\n          <div class=\"rating__active\"></div>\n          <div class=\"hero-rating__items\">\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"10\"\n              class=\"rating__item\"\n              value=\"${vote_average}\"\n              name=\"hero-rating\"\n            />\n          </div>\n        </div>\n      </div>\n    </span>\n    </div>\n        <p class=\"hero__text-movie\">${overview}</p>\n        <button class=\"btn hero__btn-movie\" id=\"modal-hero-open-mob\">Watch trailer</button>\n      `;\n        starRating();\n        heroMovie.innerHTML = `\n        <h1 class=\"hero__title-movie\">${title}</h1>\n        <div class=\"hero__wrapper-rating\">\n        <span class=\"hero-card__rating\">\n      <div class=\"rating hero-rating\">\n        <div class=\"hero-rating__body\">\n          <div class=\"rating__active\"></div>\n          <div class=\"hero-rating__items\">\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"10\"\n              class=\"rating__item\"\n              value=\"${vote_average}\"\n              name=\"hero-rating\"\n            />\n          </div>\n        </div>\n      </div>\n    </span>\n    </div>\n        <p class=\"hero__text-movie\">${overview}</p>\n        <button class=\"btn hero__btn-movie\" id=\"modal-hero-open\">Watch trailer</button>\n      `;\n        starRating();\n        const openModalHeroBtn = document.getElementById('modal-hero-open');\n        const openModalHeroBtnMob = document.getElementById('modal-hero-open-mob');\n        openModalHeroBtn.addEventListener('click', () => {\n          showMovieTrailer(id);\n          onOpenModal();\n        });\n        openModalHeroBtnMob.addEventListener('click', () => {\n          showMovieTrailer(id);\n          onOpenModal();\n        });\n\n        function onOpenModal() {\n          window.addEventListener('keydown', onEscKeyPress);\n          modalHero.classList.remove('hero-is-hidden');\n        }\n        heroContent.classList.add('visually-hidden');\n        heroWrapper.classList.add('visually-hidden');\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  });\n}\nexport function onEscKeyPress(e) {\n  if (e.code === 'Escape') {\n    onCloseModal();\n  }\n}\nexport function onBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    onCloseModal();\n  }\n}\nexport function onCloseModal() {\n  window.removeEventListener('keydown', onEscKeyPress);\n  modalHero.classList.add('hero-is-hidden');\n}\n\nexport function showMovieTrailer(movieId) {\n  try {\n    getMovieVideos(movieId).then(data => {\n      const videos = data.results.filter(video => video.type === 'Trailer');\n      if (videos.length === 0) {\n        return;\n      }\n      const videoKey = videos[0].key;\n      const trailerUrl = `https://www.youtube.com/embed/${videoKey}`;\n      const modalVideo = document.querySelector('.modal-video');\n      modalVideo.innerHTML = `<iframe src=\"${trailerUrl}\" title=\"YouTube video player\"\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share;\"\n          allowfullscreen></iframe>`;\n      modalError.classList.add('hero-is-hidden');\n    });\n  } catch (error) {\n    console.error(error);\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  renderHero();\n});\n"],"names":["$abWUW","parcelRequire","$13bd0e14f5b7c06d$var$heroBg","document","getElementById","$13bd0e14f5b7c06d$var$heroContent","$13bd0e14f5b7c06d$var$heroWrapper","$13bd0e14f5b7c06d$var$heroMovie","$13bd0e14f5b7c06d$var$heroImage","$13bd0e14f5b7c06d$var$heroMovieMob","$13bd0e14f5b7c06d$var$modalHero","$13bd0e14f5b7c06d$var$closeModalHeroBtn","$13bd0e14f5b7c06d$var$modalError","querySelector","$13bd0e14f5b7c06d$export$fb6b6f6d7754d13b","e","code","$13bd0e14f5b7c06d$export$9dc820945641dd09","window","removeEventListener","classList","add","$13bd0e14f5b7c06d$export$8640f99dfcd1c228","movieId","getMovieVideos","then","data","videos","results","filter","video","type","length","trailerUrl","key","innerHTML","error","console","addEventListener","currentTarget","target","getDayTrendingMovies","movies","movie","Math","floor","random","backdrop_path","title","overview","vote_average","id","style","backgroundImage","$55Csz","starRating","openModalHeroBtn","openModalHeroBtnMob","onOpenModal","remove"],"version":3,"file":"index.935d5db2.js.map"}