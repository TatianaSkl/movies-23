{"mappings":"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","sources":["src/my-library.js","src/scripts/hero-library.js","src/scripts/library.js"],"sourcesContent":["import './scripts/current';\nimport './scripts/theme-switch';\nimport './scripts/hero-library';\nimport './scripts/library';\nimport './scripts/modal-window';\nimport './scripts/modal-students';\n","import { getDayTrendingMovies, getMovieVideos } from './movies-api';\nimport { starRating } from './star-rating';\n\nconst heroLibraryBg = document.getElementById('heroLibrary-bg');\nconst heroLibraryContent = document.getElementById('heroLibrary-content');\nconst heroLibraryWrapper = document.getElementById('heroLibrary__wrapper');\nconst heroLibraryMovie = document.getElementById('heroLibrary-movie');\nconst heroLibraryImage = document.getElementById('heroLibrary-image');\nconst heroLibraryMovieMob = document.getElementById('heroLibrary-movie-mob');\nconst modalHero = document.getElementById('modal-hero');\nconst closeModalHeroBtn = document.getElementById('modal-hero-close');\nconst modalError = document.querySelector('.modal-error');\n\ncloseModalHeroBtn.addEventListener('click', onCloseModal);\nmodalHero.addEventListener('click', onBackdropClick);\n\nexport function renderHero() {\n  getDayTrendingMovies().then(data => {\n    try {\n      const movies = data.results;\n      if (movies.length === 0) {\n        heroLibraryMovie.classList.add('visually-hidden');\n        return;\n      } else {\n        const randomIndex = Math.floor(Math.random() * movies.length);\n        const movie = movies[randomIndex];\n        const { backdrop_path, title, overview, vote_average, id } = movie;\n\n        heroLibraryBg.style.backgroundImage = `linear-gradient(87.8deg, #0e0e0e 15.61%, rgba(14, 14, 14, 0) 60.39%),url('https://image.tmdb.org/t/p/original/${backdrop_path}')`;\n        heroLibraryImage.style.backgroundImage = `url('https://image.tmdb.org/t/p/original/${backdrop_path}')`;\n        heroLibraryMovieMob.innerHTML = `\n        <h1 class=\"hero__title-movie\">${title}</h1>\n        <div class=\"hero__wrapper-rating\">\n        <span class=\"hero-card__rating\">\n      <div class=\"rating hero-rating\">\n        <div class=\"hero-rating__body\">\n          <div class=\"rating__active\"></div>\n          <div class=\"hero-rating__items\">\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"10\"\n              class=\"rating__item\"\n              value=\"${vote_average}\"\n              name=\"hero-rating\"\n            />\n          </div>\n        </div>\n      </div>\n    </span>\n    </div>\n        <p class=\"hero__text-movie\">${overview}</p>\n        <button class=\"btn hero__btn-movie\" id=\"modal-hero-open-mob\">Watch trailer</button>\n      `;\n        starRating();\n        heroLibraryMovie.innerHTML = `\n        <h1 class=\"hero__title-movie\">${title}</h1>\n        <div class=\"hero__wrapper-rating\">\n        <span class=\"hero-card__rating\">\n      <div class=\"rating hero-rating\">\n        <div class=\"hero-rating__body\">\n          <div class=\"rating__active\"></div>\n          <div class=\"hero-rating__items\">\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"10\"\n              class=\"rating__item\"\n              value=\"${vote_average}\"\n              name=\"hero-rating\"\n            />\n          </div>\n        </div>\n      </div>\n    </span>\n    </div>\n        <p class=\"hero__text-movie\">${overview}</p>\n        <button class=\"btn hero__btn-movie\" id=\"modal-hero-open\">Watch trailer</button>\n      `;\n        starRating();\n        const openModalHeroBtn = document.getElementById('modal-hero-open');\n        const openModalHeroBtnMob = document.getElementById('modal-hero-open-mob');\n        openModalHeroBtn.addEventListener('click', () => {\n          showMovieTrailer(id);\n          onOpenModal();\n        });\n        openModalHeroBtnMob.addEventListener('click', () => {\n          showMovieTrailer(id);\n          onOpenModal();\n        });\n\n        function onOpenModal() {\n          window.addEventListener('keydown', onEscKeyPress);\n          modalHero.classList.remove('hero-is-hidden');\n        }\n          heroLibraryContent.classList.add('visually-hidden');\n          heroLibraryWrapper.classList.add('visually-hidden');\n      }\n    } catch (error) {\n      console.error(error);\n    }\n  });\n}\nexport function onEscKeyPress(e) {\n  if (e.code === 'Escape') {\n    onCloseModal();\n  }\n}\nexport function onBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    onCloseModal();\n  }\n}\nexport function onCloseModal() {\n  window.removeEventListener('keydown', onEscKeyPress);\n  modalHero.classList.add('hero-is-hidden');\n}\n\nexport function showMovieTrailer(movieId) {\n  try {\n    getMovieVideos(movieId).then(data => {\n      const videos = data.results.filter(video => video.type === 'Trailer');\n      if (videos.length === 0) {\n        return;\n      }\n      const videoKey = videos[0].key;\n      const trailerUrl = `https://www.youtube.com/embed/${videoKey}`;\n      const modalVideo = document.querySelector('.modal-video');\n      modalVideo.innerHTML = `<iframe src=\"${trailerUrl}\" title=\"YouTube video player\"\n          allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share;\"\n          allowfullscreen></iframe>`;\n      modalError.classList.add('hero-is-hidden');\n    });\n  } catch (error) {\n    console.error(error);\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  renderHero();\n});\n","// import { onOpenModal } from './modal-window';\n// import { filmCards } from './modal-window';\n\nimport { starRating } from './star-rating';\n// import { getMovieDetails } from './modal-window';\n\nconst LibKey = 'myLibrary';\n\nconst libraryGallery = document.querySelector('.library-cards__list');\nconst alertMessage = document.querySelector('.alert__message');\n\nexport function getMovieFromLib(movie) {\n  const { title, poster_path, vote_average, genres, release_date, id } = movie;\n\n  const genresName = genres\n    .map(genre => genre.name)\n    .slice(0, 2)\n    .join(', ');\n\n  const libraryMarkup = `<li class=\"film-card js-card\" data-id=\"${id}\">\n\n<img\n    class=\"film-card__img\"\n    src=\"${`https://image.tmdb.org/t/p/w500${poster_path}`}\"  \n    alt=\"${title}\" loading='lazy'\n  />\n\n  <div class=\"film-card__wrapper\">\n    <h2 class=\"film-card__title\">${title}</h2>\n    <ul class=\"film-card__description list\">\n      <li class=\"film-card__genres\">${genresName} |</li>\n\n      <li class=\"film-card__release-date\">${release_date.split('-')[0]}</li>\n    </ul>\n    <span class=\"film-card__rating\">\n      <div class=\"rating\">\n        <div class=\"rating__body\">\n          <div class=\"rating__active\"></div>\n          <div class=\"rating__items\">\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"10\"\n              class=\"rating__item\"\n              value=\"${vote_average}\"\n              name=\"rating\"\n            />\n          </div>\n        </div>\n      </div>\n    </span>\n  </div>\n</li>`;\n\n  libraryGallery.insertAdjacentHTML('beforeend', libraryMarkup);\n  starRating();\n}\n\n// //TODO: Получить массив фильмов из локального хранилища\nconst library = JSON.parse(localStorage.getItem(LibKey)) || [];\n// console.log(library);\n\nif (library.length < 1) {\n  alertMessage.classList.remove('visually-hidden');\n} else {\n  alertMessage.classList.add('visually-hidden');\n}\n\nlibrary.forEach(movie => {\n  getMovieFromLib(movie);\n});\n\n// export function getMovie() {\n//   const library = JSON.parse(localStorage.getItem(LibKey)) || [];\n// if (library.length < 1) {\n//   alertMessage.classList.remove('visually-hidden');\n// } else {\n//   alertMessage.classList.add('visually-hidden');\n// }\n//   library.forEach(movie => {\n//     getMovieFromLib(movie);\n//   });\n// }\n"],"names":["parcelRequire","$abWUW","$b761ac3400501615$var$heroLibraryBg","document","getElementById","$b761ac3400501615$var$heroLibraryContent","$b761ac3400501615$var$heroLibraryWrapper","$b761ac3400501615$var$heroLibraryMovie","$b761ac3400501615$var$heroLibraryImage","$b761ac3400501615$var$heroLibraryMovieMob","$b761ac3400501615$var$modalHero","$b761ac3400501615$var$closeModalHeroBtn","$b761ac3400501615$var$modalError","querySelector","$b761ac3400501615$export$fb6b6f6d7754d13b","e","code","$b761ac3400501615$export$9dc820945641dd09","window","removeEventListener","classList","add","$b761ac3400501615$export$8640f99dfcd1c228","movieId","getMovieVideos","then","data","videos","results","filter","video","type","length","trailerUrl","key","innerHTML","error","console","addEventListener","currentTarget","target","getDayTrendingMovies","movies","movie","Math","floor","random","backdrop_path","title","overview","vote_average","id","style","backgroundImage","$55Csz","starRating","openModalHeroBtn","openModalHeroBtnMob","onOpenModal","remove","$768a0dcfbadf42c4$var$libraryGallery","$768a0dcfbadf42c4$var$alertMessage","$768a0dcfbadf42c4$var$library","JSON","parse","localStorage","getItem","forEach","poster_path","genres","release_date","libraryMarkup","map","genre","name","slice","join","split","insertAdjacentHTML","$768a0dcfbadf42c4$export$7ca6058b495dfb9b"],"version":3,"file":"my-library.99441030.js.map"}